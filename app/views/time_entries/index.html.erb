<h1>Entries for week <%= @date.cweek %> (<%= User.find(params[:user_id]).fullname %>)</h1>
<p class="notice"><%= flash[:notice] %></p>
<p class="error"><%= flash[:error] %></p>
<p>
	<%= link_to "Previous week", user_time_entries_path(:user_id => params[:user_id], :date => @date.beginning_of_week.-(7)) %>
	<%= link_to "Next week", user_time_entries_path(:user_id => params[:user_id], :date => @date.beginning_of_week.+(7)) %>
</p>

<p>
	<% UserWorkWeek::DAYNAMES.each_with_index do |day, index| %>
		<div id="<%= day %>">
			<p>
				<b><%= "#{day} (#{@date.+(index)})" %></b> Total: <span id='<%= "#{day}_total" %>'><%= @week.day_total(index) %></span>
				   <%= link_to_remote("New", { :update => "#{day}", :position => :bottom,  
					  :url => { :action => :new, :user_id => @user.id, :date => @date.+(index), :day => day }, :method => :get }, 
					  :href => new_user_time_entry_path(@user, :date => @date.+(index))) %>   	    	
			</p>
			<p> 
				<div id='<%= "#{day}_time_entries" %>'> 
					<% @week.entries_for_day(index).each do |te| %>
						<%= render :partial => "time_entry", :object => te %>
					<% end -%>
				</div>
			</p>
		</div>
	<% end -%>
</p>