<h1>Activities</h1>
  <%= render :partial => 'sub_menu', :locals => { :tag_types => @tag_types } -%>

<p class="error"><%= flash[:error] %></p>
<p class="notice"><%= flash[:notice] %></p>

  <% form_tag :action => 'index', :method => 'get' do %>

    <% @tag_types.each do |tag_type| %>
      <% unless tag_type.tags.empty? %>
        <label><%= tag_type.name %></label>
        <%= select_tag( tag_type.name, '<option value="none">---</option><option value="all">all</option>' +  options_from_collection_for_select( tag_type.tags, 'id', 'name', '---') ) %>
        &nbsp;<%= "OR" unless tag_type == @tag_types.last %>
      <% end %>
    <% end %>
    <%= submit_tag 'Update' %>
  <% end %>

        <br/>
 <%= page_entries_info @activities %>
 <%= will_paginate @activities %>
<% @activities.each do |a| -%>
  <hr/>
  <div>
    <b>Name:</b> <%= link_to a.name, edit_activity_path(a) %><br/>
    <b>Tags:</b> <% a.tags.each do |t| %>
      <%=  "#{t.name}(#{t.tag_type_name})" -%>,
    <% end %> <br/>
    <b>Description:</b> <%= a.description %><br/>
    <b>Created:</b> <%= a.created_at.to_date %><br/>
	<b>Active:</b> <%= if a.active then 'Yes' else 'No' end %><br/>
	<b>Default:</b> <%= if a.default_activity then 'Yes' else 'No' end %><br/>
	<%= link_to 'Remove', activity_path(a), :method => :delete %>
  </div>
<% end -%>

  <br />
<%= will_paginate @activities %>
  <hr/>
<%= link_to "New Activity", :action => "new" %>
