<h1>Activities</h1>
  <%= render :partial => 'sub_menu', :locals => { :tag_types => @tag_types } -%>

<p class="error"><%= flash[:error] %></p>
<p class="notice"><%= flash[:notice] %></p>
<table>
	<% form_tag(:action => "filter_by_tag_type") do %>
		<tr>
			<td><%= label_tag "Tag type"%></td>
			<td><%= collection_select(:tag_type, :id, @tag_types, :id, :name) %></td>
			<td><%= submit_tag "Apply Filter" %></td>
		</tr>
	<% end -%>
	<% if defined? @tag_type %>
		<% form_tag(:action => "filter_by_tag") do %>
			<%= hidden_field_tag "tag_type_id", @tag_type.id %>
			<tr>
		   	 	<td><%= label_tag "Tag"%></td>
				<td><%= collection_select(:tag, :id, @tag_type.tags, :id, :name) %></td>
				<td><%= submit_tag "Apply Filter" %></td> 
			</tr>
		<% end -%>
	<% end -%>
</table>
<% if defined? @tag_type %>
	<h4>Number of activities for <%= if defined? @tag then "tag #{@tag.name}" else "tag type #{@tag_type.name}" end %>: <%= @activities.size %></h4>
<% end -%>

        <br/>
 <%= page_entries_info @activities %>
 <%= will_paginate @activities %>
<% @activities.each do |a| -%>
  <hr/>
  <div>
    <b>Name:</b> <%= link_to a.name, edit_activity_path(a) %><br/>
    <b>Tags:</b> <% a.tags.each do |t| %>
      <%=  "#{t.name}(#{t.tag_type_name})" -%>,
    <% end %> <br/>
    <b>Description:</b> <%= a.description %><br/>
    <b>Created:</b> <%= a.created_at.to_date if a.created_at %><br/>
	<b>Active:</b> <%= if a.active then 'Yes' else 'No' end %><br/>
	<b>Default:</b> <%= if a.default_activity then 'Yes' else 'No' end %><br/>
	<%= link_to 'Remove', activity_path(a), :method => :delete %>
  </div>
<% end -%>

  <br />
<%= will_paginate @activities %>
  <hr/>
<%= link_to "New Activity", :action => "new" %>