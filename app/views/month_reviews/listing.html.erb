<%= render :partial => 'sub_menu' -%>

<% form_tag user_month_review_path(@current_user, :id => :listing), :method => :get do %>
  <p>
    <label for="date">Period</label>
    <%= date_select "calendar", "date", {:start_year => Date.today.year - 5 , :end_year => Date.today.year + 1, :discard_day => true, :default => @beginning_of_month} %>
    <%= submit_tag 'View' %>
  </p>
<% end %>

<hr/>

<% if @time_entries != nil %>
  <% @time_entries.each do |activity, te| %>
    <h3><%= activity.customer_project_name %></h3>
    <table class="regular">
      <tr>
        <th>Date</th>
		<th>Hour Type</th>
		<th>Hours</th>
		<th>Notes</th>
      </tr>
      <% te.sort { |te1, te2| te1 <=> te2 }.each do |entry| %>
        <tr>
          <td><%= entry.date -%></td>
          <td><%= entry.hour_type.name -%></td>
          <td><%= entry.hours -%></td>
          <td><%=h entry.notes -%></td>
        </tr>
      <% end %>
    </table>
  <% end %>
<% else %>
    <p>No time entries for this period</p>
<% end %>

<br/><hr/>
Download report: <%= link_to image_tag("pdficon_small.gif", :alt => "pdf"), params.merge({ :format => "pdf", :action => "show" }) %>
